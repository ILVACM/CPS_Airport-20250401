(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a8e9dec"],{"51ff3":function(e,t,s){"use strict";s("abe6")},abe6:function(e,t,s){},c01d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"app-container"},[s("el-form",{ref:"formRef",attrs:{model:e.form,"label-width":"130px",rules:e.rules}},[s("el-form-item",{attrs:{label:"输入源配置",prop:"input_type"}},[s("el-select",{attrs:{placeholder:"请选择输入源"},on:{change:e.changeInputType},model:{value:e.form.input_type,callback:function(t){e.$set(e.form,"input_type",t)},expression:"form.input_type"}},[s("el-option",{attrs:{label:"USB摄像头",value:"0"}}),s("el-option",{attrs:{label:"视频流",value:"1"}}),s("el-option",{attrs:{label:"网络摄像头",value:"2"}})],1)],1),s("el-form-item",{attrs:{label:"输入路径配置",prop:"source"}},[s("el-input",{staticStyle:{width:"300px","margin-left":"10px"},attrs:{placeholder:"输入源配置"},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}}),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.updateSource}},[e._v("保存")])],1),s("el-form-item",{attrs:{label:"视频配置"}},[s("el-input",{staticStyle:{width:"250px","text-align":"center"},attrs:{placeholder:"视频保存时间（单位为分钟）"},model:{value:e.form.cutTime,callback:function(t){e.$set(e.form,"cutTime",t)},expression:"form.cutTime"}}),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.updateSaveTimes}},[e._v("保存")])],1),s("el-form-item",{attrs:{label:"检测阈值配置",prop:"threshold"}},[s("el-input-number",{staticStyle:{width:"300px"},attrs:{placeholder:"检测阈值输入",min:0,max:1,step:.1},model:{value:e.form.threshold,callback:function(t){e.$set(e.form,"threshold",e._n(t))},expression:"form.threshold"}}),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.updateThreshold}},[e._v("保存")])],1),s("el-form-item",{attrs:{label:"是否开启视频保存"}},[s("el-switch",{on:{change:e.updateStatus},model:{value:e.save_Status,callback:function(t){e.save_Status=t},expression:"save_Status"}})],1),s("el-form-item",{attrs:{label:"是否开始检测"}},[s("el-switch",{on:{change:function(t){return e.updateStatus(1)}},model:{value:e.detected_Status,callback:function(t){e.detected_Status=t},expression:"detected_Status"}})],1)],1)],1)])},r=[],o=(s("fb6a"),s("d3b7"),s("25f0"),s("159b"),s("5c96")),c={data:function(){return{tempData:"",form:{input_type:"",source:"",threshold:.5,cutTime:"",boxes:[]},rules:{input_type:[{required:!0,message:"请选择输入源",trigger:"blur"}],source:[{required:!0,message:"请输入输入源配置",trigger:"blur"}],threshold:[{required:!0,message:"请输入检测阈值",trigger:"blur"},{validator:function(e,t,s){"number"!==typeof t||t<0||t>1?s(new Error("检测阈值必须在 0 到 1 之间")):s()},trigger:"blur"}]},scale:null,detected_Status:!1,save_Status:!1,imageSrc:null,isDrawing:!1,currentBox:null}},created:function(){this.getConfig()},methods:{getConfig:function(){var e=this;this.$store.dispatch("systemconfig/getConfig").then((function(t){200===t.status?(e.tempData=t.data,e.form.threshold=e.tempData.threshold,e.detected_Status=0===e.tempData.detected_status,e.save_Status=0===e.tempData.save_status,e.form.input_type=e.tempData.input_type.toString(),e.form.source=e.tempData.source,e.form.cutTime=e.tempData.save_time,Object(o["Message"])({message:t.message,type:"success",duration:3e3})):Object(o["Message"])({message:t.message,type:"error",duration:3e3})})).catch((function(e){console.error("获取配置信息失败:",e)}))},changeInputType:function(){this.$store.dispatch("systemconfig/changeInputType",this.form.input_type).then((function(e){200===e.status?Object(o["Message"])({message:"修改成功",type:"success",duration:3e3}):Object(o["Message"])({message:e.message,type:"error",duration:3e3})})).catch((function(e){console.error("保存失败:",e)}))},updateSource:function(){var e=this;this.$refs.formRef.validateField("source",(function(t){if(t)return console.log("配置源验证失败"),!1;e.$store.dispatch("systemconfig/updateSource",e.form.source).then((function(e){200===e.status?Object(o["Message"])({message:"修改成功",type:"success",duration:3e3}):Object(o["Message"])({message:e.message,type:"error",duration:3e3})})).catch((function(e){console.error("保存失败:",e)}))}))},updateThreshold:function(){var e=this;this.$refs.formRef.validateField("threshold",(function(t){if(t)return console.log("阈值验证失败"),!1;e.$store.dispatch("systemconfig/updateThreshold",e.form.threshold).then((function(e){console.log(e),200===e.status?Object(o["Message"])({message:"修改成功",type:"success",duration:3e3}):Object(o["Message"])({message:e.message,type:"error",duration:3e3})})).catch((function(e){console.error("保存失败:",e)}))}))},updateSaveTimes:function(){console.log(this.form.cutTime),this.$store.dispatch("systemconfig/updateSaveTimes",this.form.cutTime).then((function(e){200===e.status?Object(o["Message"])({message:"修改成功",type:"success",duration:3e3}):Object(o["Message"])({message:e.message,type:"error",duration:3e3})})).catch((function(e){console.error("保存失败:",e)}))},updateStatus:function(e){var t=this;if(console.log(e),1===e){var s=this.detected_Status?0:1;this.$store.dispatch("systemconfig/updateDetectStatus",s).then((function(e){if(console.log(e),200!==e.status)return Object(o["Message"])({message:e.message,type:"error",duration:3e3}),void(t.detected_Status=!1);t.tempData=e,Object(o["Message"])({message:"修改成功",type:"success",duration:3e3})})).catch((function(e){console.error("保存失败:",e),t.detected_Status=!1}))}else{var a=this.save_Status?0:1;this.$store.dispatch("systemconfig/updateSaveStatus",a).then((function(e){console.log(e),200===e.status?(t.tempData=e,Object(o["Message"])({message:e.message,type:"success",duration:3e3})):Object(o["Message"])({message:e.message,type:"error",duration:3e3})})).catch((function(e){console.error("保存失败:",e)}))}},changeInputview:function(e){this.form.input_view=e,1===e?this.form.boxes=this.form.boxes.slice(0,1):2===e&&(this.form.boxes=this.form.boxes.slice(0,2)),this.redraw()},redraw:function(){var e=this.$refs.drawCanvas.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),this.form.boxes.forEach((function(t){e.beginPath(),e.rect(t.x1,t.y1,t.width,t.height),e.stroke()}))}}},n=c,i=(s("51ff3"),s("2877")),u=Object(i["a"])(n,a,r,!1,null,"bb314114",null);t["default"]=u.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6467868d"],{"3fb1":function(e,t,n){},"77c5":function(e,t,n){"use strict";n("3fb1")},b5ae:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"card"},[n("div",{ref:"container",staticClass:"container",staticStyle:{"font-size":"14px"}},[n("el-row",{staticStyle:{margin:"10px"},attrs:{gutter:10}},[n("el-col",{attrs:{span:5}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:8}},[e._v("违禁品名称:")]),n("el-col",{attrs:{span:16}},[n("el-input",{staticStyle:{display:"inline"},attrs:{placeholder:"请输入违禁品名称",size:"mini"},model:{value:e.form.condition.name,callback:function(t){e.$set(e.form.condition,"name",t)},expression:"form.condition.name"}})],1)],1)],1),n("el-col",{attrs:{span:10}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:6}},[e._v("时间范围:")]),n("el-col",{attrs:{span:18}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","range-separator":"至",size:"mini","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp"},on:{change:e.convertTimeFormat},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}})],1)],1)],1),n("el-col",{attrs:{span:5}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:6}},[e._v("作业地点:")]),n("el-col",{attrs:{span:18}},[n("el-input",{staticStyle:{display:"inline"},attrs:{placeholder:"请输入作业地点",size:"mini"},model:{value:e.form.condition.place,callback:function(t){e.$set(e.form.condition,"place",t)},expression:"form.condition.place"}})],1)],1)],1),n("el-col",{attrs:{span:4,offset:.5}},[n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getDataByPageAndCondition}},[e._v("查询")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportSelected}},[e._v("导出选中 ")]),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.open_message_popUp}},[e._v("删除选中 ")])],1)],1)],1),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tables,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"违禁品名称"}}),n("el-table-column",{attrs:{prop:"time",label:"时间"}}),n("el-table-column",{attrs:{prop:"place",label:"作业地点"}}),n("el-table-column",{attrs:{prop:"originalImage",label:"原始图像"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("img",{attrs:{alt:"加载失败",src:e.baseURL+encodeURI(t.row.originalImagePath),height:e.imageHeight},on:{click:function(n){e.openImage(e.baseURL+encodeURI(t.row.originalImagePath),"原始图像",{name:t.row.name,time:t.row.time})}}})]}}])}),n("el-table-column",{attrs:{prop:"detectedImagePath",label:"检测图像"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("img",{attrs:{alt:"加载失败",src:e.baseURL+encodeURI(t.row.detectedImagePath),height:e.imageHeight},on:{click:function(n){e.openImage(e.baseURL+encodeURI(t.row.detectedImagePath),"检测图像",{name:t.row.name,time:t.row.time})}}})]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.handleDerive(encodeURI(t.row.originalImagePath),encodeURI(t.row.detectedImagePath))}}},[e._v("导出 ")])]}}])})],1),n("el-dialog",{attrs:{visible:e.showDialog,width:"80%"},on:{"update:visible":function(t){e.showDialog=t},close:e.closeDialog}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",padding:"10px","background-color":"#f5f5f5","font-weight":"bold"}},[n("div",[n("span",[e._v("违禁品名称: "+e._s(e.selectedItem.name))]),e._v(" | "),n("span",[e._v("时间: "+e._s(e.selectedItem.time))]),e._v(" | "),n("span",[e._v("图像类型: "+e._s(e.imageType))])]),n("div",[n("span",[e._v(e._s(e.imageType))])])]),n("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[n("img",{staticStyle:{width:"100%",display:"block"},attrs:{src:e.currentImagePath,alt:"图片加载失败"}}),n("div",{staticStyle:{position:"absolute",top:"50%",left:"10px",transform:"translateY(-50%)","z-index":"10",cursor:"pointer","background-color":"rgba(0, 0, 0, 0.5)",padding:"10px","border-radius":"50%"},on:{click:e.previousImage}},[n("i",{staticClass:"el-icon-arrow-left",staticStyle:{color:"white","font-size":"24px"}})]),n("div",{staticStyle:{position:"absolute",top:"50%",right:"10px",transform:"translateY(-50%)","z-index":"10",cursor:"pointer","background-color":"rgba(0, 0, 0, 0.5)",padding:"10px","border-radius":"50%"},on:{click:e.nextImage}},[n("i",{staticClass:"el-icon-arrow-right",staticStyle:{color:"white","font-size":"24px"}})])])]),n("div",{staticClass:"block",staticStyle:{width:"50%",margin:"0 auto"}},[n("el-pagination",{attrs:{"current-page":e.form.page_info.page,"page-size":e.form.page_info.per_page,"page-sizes":[10,20,50,100,e.total],layout:"total, sizes, prev, pager, next, jumper, ->, slot",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},i=[],o=n("c7eb"),s=n("1da1"),r=(n("b0c0"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("ddb0"),n("2b3d"),n("bf19"),n("9861"),n("fa8a")),l=n("c790"),c=n("df7c"),d=n.n(c),h={data:function(){return{screenWidth:6/7*window.innerWidth,screenHeight:6/7*window.innerHeight,showDialog:!1,currentImagePath:"",form:{condition:{name:"",startTime:"",endTime:"",place:""},page_info:{per_page:10,page:1}},chart1:"",chart2:"",tables:[],total:1,baseURL:"/dataQuery/getImageByPath?path=",imageWidth:this.screenWidth/6,imageHeight:this.screenHeight/7.5,multipleSelection:[],timeRange:[],images:[],currentIndex:0,imageType:"",selectedItem:{name:"",time:""},imageType_list:[],selectedItem_list:[]}},computed:{textStyle:function(){return"fontSize:"+(this.screenWidth/100+2)+"px"},selectIdList:function(){for(var e=[],t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].id);return e}},watch:{},created:function(){},mounted:function(){this.listenResizeEvent(),this.getDataByPageAndCondition()},methods:{str:l["str"],handleResize:function(){this.screenWidth=6/7*window.innerWidth,this.screenHeight=6/7*window.innerHeight,this.imageWidth=this.screenWidth/6,this.imageHeight=this.screenHeight/7.5},listenResizeEvent:function(){window.addEventListener("resize",this.handleResize)},removeResizeEvent:function(){window.removeEventListener("resize",this.handleResize)},closeDialog:function(){this.showDialog=!1},getDataByPageAndCondition:function(){var e=this;Object(r["c"])(this.form).then((function(t){e.tables=t.data.list;for(var n=0;n<e.tables.length;n++)e.tables[n].time=new Date(e.tables[n].time).toLocaleString();e.handleResize(),e.total=t.data.total,e.imageType_list=[],e.selectedItem_list=[],e.images=[];for(var a=0;a<e.tables.length;a++)console.log("changdu",e.tables.length),e.images.push(e.baseURL+encodeURI(e.tables[a].originalImagePath)),e.images.push(e.baseURL+encodeURI(e.tables[a].detectedImagePath)),e.selectedItem={name:e.tables[a].name,time:e.tables[a].time},console.log("this.selectedItem",e.selectedItem),e.selectedItem_list.push(e.selectedItem),e.selectedItem_list.push(e.selectedItem),e.imageType_list.push("原始图像"),e.imageType_list.push("检测图像");console.log("changdu",e.tables.length),console.log("images",e.images),console.log("imageType_list",e.imageType_list),console.log("selectedItem_list",e.selectedItem_list)})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.form.page_info.per_page=e,this.getDataByPageAndCondition(),console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.form.page_info.page=e,n.next=3,t.getDataByPageAndCondition(t.form);case 3:console.log("当前页: ".concat(e));case 4:case"end":return n.stop()}}),n)})))()},deleteSelected:function(){var e=this;console.log(this.selectIdList),Object(r["a"])(this.selectIdList).then((function(t){200!==t.status?e.$message({type:"error",message:"删除失败,"+t.message}):e.$message({type:"success",message:"删除成功!"}),Object(r["c"])(e.form).then((function(t){e.tables=t.data.list;for(var n=0;n<e.tables.length;n++)e.tables[n].time=new Date(e.tables[n].time).toLocaleString();e.handleResize(),e.total=t.data.total})).catch((function(t){e.$message({type:"error",message:"删除失败"}),console.log(t)}))})).catch((function(t){e.$message({type:"error",message:"删除失败"}),console.log(t)}))},open_message_popUp:function(){var e=this;this.$confirm("是否删除选中条目?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteSelected()})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},exportSelected:function(){for(var e=0;e<this.multipleSelection.length;e++){var t=this.multipleSelection[e];this.handleDerive(t["originalImagePath"],t["detectedImagePath"])}},handleDerive:function(e,t){var n=this,a=/\\/g;e=e.replace(a,"/"),t=t.replace(a,"/"),Object(r["b"])(e).then((function(t){n.exportImage(t.data,e)})).catch((function(e){console.error("Error downloading file:",e)})),Object(r["b"])(t).then((function(e){n.exportImage(e.data,t)})).catch((function(e){console.error("Error downloading file:",e)}))},exportImage:function(e,t){var n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=d.a.basename(t),document.body.appendChild(n),n.click(),document.body.removeChild(n)},handleSelectionChange:function(e){this.multipleSelection=e},convertTimeFormat:function(){for(var e=[],t=0;t<this.timeRange.length;t++)e.push(this.timeRange[t]);this.form.condition.startTime=e[0],this.form.condition.endTime=e[1]},openImage:function(e,t,n){this.currentIndex=this.images.indexOf(e),-1===this.currentIndex&&(this.currentIndex=0),this.currentImagePath=e,this.imageType=t,this.selectedItem=n,this.showDialog=!0},previousImage:function(){this.currentIndex>0?this.currentIndex-=1:this.currentIndex=this.images.length-1,this.currentImagePath=this.images[this.currentIndex],this.imageType=this.imageType_list[this.currentIndex],this.selectedItem=this.selectedItem_list[this.currentIndex],console.log(this.currentIndex),console.log(this.selectedItem.name),console.log(this.selectedItem.time)},nextImage:function(){this.currentIndex<this.images.length-1?this.currentIndex+=1:this.currentIndex=0,this.currentImagePath=this.images[this.currentIndex],this.imageType=this.imageType_list[this.currentIndex],this.selectedItem=this.selectedItem_list[this.currentIndex],console.log(this.currentIndex),console.log(this.selectedItem.name),console.log(this.selectedItem.time)}}},u=h,m=(n("77c5"),n("2877")),g=Object(m["a"])(u,a,i,!1,null,null,null);t["default"]=g.exports},c790:function(e,t){e.exports={boolean:function(e,t,n){return void 0!==n?(e="undefined"===typeof e||isNaN(e)?1:parseInt(e,10),t="undefined"===typeof t||isNaN(t)?1:parseInt(t,10),Math.random()>1/(e+t)*e?!n:n):Math.random()>=.5},bool:function(e,t,n){return this.boolean(e,t,n)},natural:function(e,t){return e="undefined"!==typeof e?parseInt(e,10):0,t="undefined"!==typeof t?parseInt(t,10):9007199254740992,Math.round(Math.random()*(t-e))+e},integer:function(e,t){return e="undefined"!==typeof e?parseInt(e,10):-9007199254740992,t="undefined"!==typeof t?parseInt(t,10):9007199254740992,Math.round(Math.random()*(t-e))+e},int:function(e,t){return this.integer(e,t)},float:function(e,t,n,a){n=void 0===n?0:n,n=Math.max(Math.min(n,17),0),a=void 0===a?17:a,a=Math.max(Math.min(a,17),0);for(var i=this.integer(e,t)+".",o=0,s=this.natural(n,a);o<s;o++)i+=o<s-1?this.character("number"):this.character("123456789");return parseFloat(i,10)},character:function(e){var t={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",symbol:"!@#$%^&*()[]"};return t.alpha=t.lower+t.upper,t["undefined"]=t.lower+t.upper+t.number+t.symbol,e=t[(""+e).toLowerCase()]||e,e.charAt(this.natural(0,e.length-1))},char:function(e){return this.character(e)},string:function(e,t,n){var a;switch(arguments.length){case 0:a=this.natural(3,7);break;case 1:a=e,e=void 0;break;case 2:"string"===typeof arguments[0]?a=t:(a=this.natural(e,t),e=void 0);break;case 3:a=this.natural(t,n);break}for(var i="",o=0;o<a;o++)i+=this.character(e);return i},str:function(){return this.string.apply(this,arguments)},range:function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1,e=+e,t=+t,n=+n;var a=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(a);while(i<a)o[i++]=e,e+=n;return o}}},fa8a:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return r}));var a=n("b775");function i(e){return Object(a["a"])({url:"/dataQuery/paginate/",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/dataQuery/delete/",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/dataQuery/statistic/",method:"post",data:e})}function r(e){return Object(a["a"])({url:"/dataQuery/getImageByPath?path="+e,method:"get",responseType:"blob"})}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b1afea0"],{"14c4":function(t,e,n){"use strict";n("395c")},"395c":function(t,e,n){},"4d6a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[n("h3",[t._v("违禁品报警类型设置")]),n("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.showAdd}},[t._v("添加违禁品")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categories,"cell-style":t.tableCellStyle}},[n("el-table-column",{attrs:{label:"分类","min-width":"10%",property:"category"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))])]}}])}),n("el-table-column",{attrs:{label:"全选","min-width":"5%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{staticClass:"ml-2",staticStyle:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},on:{change:function(n){return t.handleSelectAll(e.row)}},model:{value:e.row.selectAll,callback:function(n){t.$set(e.row,"selectAll",n)},expression:"scope.row.selectAll"}})]}}])}),n("el-table-column",{attrs:{label:"违禁品","min-width":"85%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.items}},[n("el-table-column",{attrs:{prop:"name"}}),n("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[n("el-switch",{staticClass:"ml-2",staticStyle:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},on:{change:function(n){return t.handleSwitchChange(a.row,e.row)}},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"itemScope.row.status"}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.showEdit(e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.remove(e.row)}}},[t._v("删除")])]}}],null,!0)})],1)],1)]}}])})],1),n("el-pagination",{attrs:{"current-page":t.query.pageNum,"page-sizes":[10,20,30,40],"page-size":t.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",background:!0,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),n("Modal",{staticClass:"modal",attrs:{"dialog-visible":t.dialogVisible,options:t.categoryKey,info:t.selectedCateInfo},on:{"on-close":t.closeModal}})],1)},o=[],l=n("c7eb"),i=n("1da1"),s=(n("d3b7"),n("159b"),n("b0c0"),n("b64b"),n("b775"));function c(t){return Object(s["a"])({url:"cateSetting/select",method:"get",params:t})}function r(t){return Object(s["a"])({url:"cateSetting/updateStatus",method:"post",params:t})}function u(t){return Object(s["a"])({url:"cateSetting/deleteCategory",method:"post",params:t})}function d(t){return Object(s["a"])({url:"cateSetting/addCategory",method:"post",params:t})}function f(t){return Object(s["a"])({url:"cateSetting/updateCategory",method:"post",params:t})}var h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"center-dialog-title",attrs:{visible:t.internalDialogVisible,title:"编辑违禁品类别"},on:{"update:visible":function(e){t.internalDialogVisible=e},close:t.onClose}},[n("el-form",{staticClass:"my-el-form"},[n("el-form-item",{attrs:{label:"类别"}},[n("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择"},on:{change:t.handleChange},model:{value:t.info.selectedOption,callback:function(e){t.$set(t.info,"selectedOption",e)},expression:"info.selectedOption"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t.showAnotherInput?n("el-form-item",{attrs:{label:"类别"}},[n("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"另一个输入框"},model:{value:t.anotherInputValue,callback:function(e){t.anotherInputValue=e},expression:"anotherInputValue"}})],1):t._e(),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"输入框"},model:{value:t.info.inputValue,callback:function(e){t.$set(t.info,"inputValue",e)},expression:"info.inputValue"}})],1)],1),n("div",{staticClass:"button-container"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.summit}},[t._v("提交")])],1)],1)},p=[],g=(n("fb6a"),n("5c96")),m={props:{dialogVisible:{type:Boolean,default:!1},options:{type:Array,default:function(){return[function(){}]}},info:{default:function(){return{selectedOption:"",inputValue:"",itermId:""}}}},data:function(){return{anotherInputValue:"",internalDialogVisible:this.dialogVisible,showAnotherInput:!1}},watch:{dialogVisible:function(t){this.internalDialogVisible=t},options:{handler:function(t){this.internalOptions=t.slice()}},info:{immediate:!0,handler:function(t){this.info.selectedOption=t.selectedOption,console.log(this.info.selectedOption)}}},methods:{handleChange:function(t){this.showAnotherInput="other"===t},onClose:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.options=[],this.$emit("on-close",t)},summit:function(){var t=this;if("itemId"in this.info){console.log("编辑");var e={categoryName:this.info.selectedOption,name:this.info.inputValue,id:this.info.itemId};this.showAnotherInput&&(e.categoryName=this.anotherInputValue),f(e).then((function(e){t.onClose(1)})).catch((function(t){console.log(t)}))}else e={categoryName:this.info.selectedOption,name:this.info.inputValue},this.showAnotherInput&&(e.categoryName=this.anotherInputValue),d(e).then((function(e){console.log(e.code),200===e.code?(Object(g["Message"])({message:"添加成功！",type:"success",duration:3e3}),t.onClose(1)):Object(g["Message"])({message:"error",type:"error",duration:3e3}),t.onClose(1)})).catch((function(t){console.log(t)}))}}},b=m,y=(n("14c4"),n("2877")),w=Object(y["a"])(b,h,p,!1,null,"a6d3f9da",null),v=w.exports,C={components:{Modal:v},data:function(){return{categories:[],query:{pageNum:1,pageSize:10},total:0,dialogVisible:!1,categoryKey:[{label:"其他",value:"other"}],selectedCateInfo:{}}},created:function(){this.loadData()},methods:{handleSelectAll:function(t){var e=t.selectAll;t.items.forEach((function(t){t.status=e}));var n={status:e,category:t.name};r(n).then().catch((function(t){console.log(t)}))},handleSwitchChange:function(t,e){var n=!0;e.items.forEach((function(t){!1===t.status&&(n=!1)})),e.selectAll=n;var a={status:t.status,id:t.id};r(a).then().catch((function(t){console.log(t)}))},remove:function(t){var e=this;return Object(i["a"])(Object(l["a"])().mark((function n(){var a;return Object(l["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={id:t.id},e.$confirm("您确定要删除这个违禁品吗？","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){u(a).then((function(t){200===t.code&&(Object(g["Message"])({message:"删除成功！",type:"success",duration:3e3}),e.loadData())})).catch((function(t){console.log(t)}))})).catch((function(){Object(g["Message"])({message:"已取消",type:"info",duration:3e3})}));case 2:case"end":return n.stop()}}),n)})))()},tableCellStyle:function(t){return!1===t.row.visible?"background-color:#ffffff;":"background-color:#f7f7f7;"},loadData:function(){var t=this;this.categories=[],this.categoryKey=[{label:"其他",value:"other"}],c(this.query).then((function(e){var n=e.data,a=e.categoryKey;t.total=e.total,a.forEach((function(e){var n={label:e,value:e};t.categoryKey.push(n)})),Object.keys(n).forEach((function(e){for(var a=!0,o=0;o<n[e].length;o++)if(!1===n[e][o].status){a=!1;break}var l={name:e,selectAll:a,items:n[e]};t.categories.push(l)}))})).catch((function(t){console.log(t)}))},handleSizeChange:function(t){this.query.pageSize=t,this.loadData()},handleCurrentChange:function(t){this.query.pageNum=t,this.loadData()},showAdd:function(){this.dialogVisible=!0},showEdit:function(t){console.log(t),this.selectedCateInfo={selectedOption:t.categoryName,inputValue:t.name,itemId:t.id},this.dialogVisible=!0},closeModal:function(t){this.dialogVisible=!1,this.selectedCateInfo={},console.log(t),1===t&&this.loadData()}}},S=C,O=(n("9a8e"),Object(y["a"])(S,a,o,!1,null,"2df4fe04",null));e["default"]=O.exports},"9a8e":function(t,e,n){"use strict";n("d006")},d006:function(t,e,n){}}]);
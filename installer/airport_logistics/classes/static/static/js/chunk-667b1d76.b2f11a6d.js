(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-667b1d76"],{"14c4":function(e,t,n){"use strict";n("395c")},"395c":function(e,t,n){},"4c87":function(e,t,n){},"4d6a":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[n("h3",[e._v("违禁品报警类型设置")]),n("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.showAdd}},[e._v("添加违禁品")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.categories,"cell-style":e.tableCellStyle}},[n("el-table-column",{attrs:{label:"分类","min-width":"10%",property:"category"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),n("el-table-column",{attrs:{label:"全选","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{staticClass:"ml-2",staticStyle:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},on:{change:function(n){return e.handleSelectAll(t.row)}},model:{value:t.row.selectAll,callback:function(n){e.$set(t.row,"selectAll",n)},expression:"scope.row.selectAll"}})]}}])}),n("el-table-column",{attrs:{label:"违禁品","min-width":"85%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.items}},[n("el-table-column",{attrs:{prop:"name"}}),n("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(o){return[n("el-switch",{staticClass:"ml-2",staticStyle:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},on:{change:function(n){return e.handleSwitchChange(o.row,t.row)}},model:{value:o.row.status,callback:function(t){e.$set(o.row,"status",t)},expression:"itemScope.row.status"}})]}}],null,!0)}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.showEdit(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")])]}}],null,!0)})],1)],1)]}}])})],1),n("el-pagination",{attrs:{"current-page":e.query.pageNum,"page-sizes":[10,20,30,40],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",background:!0,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("Modal",{staticClass:"modal",attrs:{"dialog-visible":e.dialogVisible,options:e.categoryKey,info:e.selectedCateInfo},on:{"on-close":e.closeModal}})],1)},a=[],l=n("d198"),i=n("7580"),s=(n("b0c0"),n("b64b"),n("d3b7"),n("159b"),n("b775"));function c(e){return Object(s["a"])({url:"cateSetting/select",method:"get",params:e})}function r(e){return Object(s["a"])({url:"cateSetting/updateStatus",method:"post",params:e})}function u(e){return Object(s["a"])({url:"cateSetting/deleteCategory",method:"post",params:e})}function d(e){return Object(s["a"])({url:"cateSetting/addCategory",method:"post",params:e})}function f(e){return Object(s["a"])({url:"cateSetting/updateCategory",method:"post",params:e})}var h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"center-dialog-title",attrs:{visible:e.internalDialogVisible,title:"编辑违禁品类别"},on:{"update:visible":function(t){e.internalDialogVisible=t},close:e.onClose}},[n("el-form",{staticClass:"my-el-form"},[n("el-form-item",{attrs:{label:"类别"}},[n("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.info.selectedOption,callback:function(t){e.$set(e.info,"selectedOption",t)},expression:"info.selectedOption"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.showAnotherInput?n("el-form-item",{attrs:{label:"类别"}},[n("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"另一个输入框"},model:{value:e.anotherInputValue,callback:function(t){e.anotherInputValue=t},expression:"anotherInputValue"}})],1):e._e(),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"输入框"},model:{value:e.info.inputValue,callback:function(t){e.$set(e.info,"inputValue",t)},expression:"info.inputValue"}})],1)],1),n("div",{staticClass:"button-container"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.summit}},[e._v("提交")])],1)],1)},p=[],g=(n("fb6a"),n("5c96")),m={props:{dialogVisible:{type:Boolean,default:!1},options:{type:Array,default:function(){return[function(){}]}},info:{default:function(){return{selectedOption:"",inputValue:"",itermId:""}}}},data:function(){return{anotherInputValue:"",internalDialogVisible:this.dialogVisible,showAnotherInput:!1}},watch:{dialogVisible:function(e){this.internalDialogVisible=e},options:{handler:function(e){this.internalOptions=e.slice()}},info:{immediate:!0,handler:function(e){this.info.selectedOption=e.selectedOption,console.log(this.info.selectedOption)}}},methods:{handleChange:function(e){this.showAnotherInput="other"===e},onClose:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.options=[],this.$emit("on-close",e)},summit:function(){var e=this;if("itemId"in this.info){console.log("编辑");var t={categoryName:this.info.selectedOption,name:this.info.inputValue,id:this.info.itemId};this.showAnotherInput&&(t.categoryName=this.anotherInputValue),f(t).then((function(t){e.onClose(1)})).catch((function(e){console.log(e)}))}else t={categoryName:this.info.selectedOption,name:this.info.inputValue},this.showAnotherInput&&(t.categoryName=this.anotherInputValue),d(t).then((function(t){console.log(t.code),200===t.code?(Object(g["Message"])({message:"添加成功！",type:"success",duration:3e3}),e.onClose(1)):Object(g["Message"])({message:"error",type:"error",duration:3e3}),e.onClose(1)})).catch((function(e){console.log(e)}))}}},b=m,y=(n("14c4"),n("2877")),w=Object(y["a"])(b,h,p,!1,null,"a6d3f9da",null),v=w.exports,C={components:{Modal:v},data:function(){return{categories:[],query:{pageNum:1,pageSize:10},total:0,dialogVisible:!1,categoryKey:[{label:"其他",value:"other"}],selectedCateInfo:{}}},created:function(){this.loadData()},methods:{handleSelectAll:function(e){var t=e.selectAll;e.items.forEach((function(e){e.status=t}));var n={status:t,category:e.name};r(n).then((function(e){200===e.code&&Object(g["Message"])({message:"success",type:"success",duration:1e3})})).catch((function(e){console.log(e)}))},handleSwitchChange:function(e,t){var n=!0;t.items.forEach((function(e){!1===e.status&&(n=!1)})),t.selectAll=n;var o={status:e.status,id:e.id};r(o).then((function(e){200===e.code&&Object(g["Message"])({message:"success",type:"success",duration:1e3})})).catch((function(e){console.log(e)}))},remove:function(e){var t=this;return Object(i["a"])(Object(l["a"])().mark((function n(){var o;return Object(l["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:o={id:e.id},t.$confirm("您确定要删除这个违禁品吗？","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){u(o).then((function(e){200===e.code&&(Object(g["Message"])({message:"删除成功！",type:"success",duration:3e3}),t.loadData())})).catch((function(e){console.log(e)}))})).catch((function(){Object(g["Message"])({message:"已取消",type:"info",duration:3e3})}));case 2:case"end":return n.stop()}}),n)})))()},tableCellStyle:function(e){return!1===e.row.visible?"background-color:#ffffff;":"background-color:#f7f7f7;"},loadData:function(){var e=this;this.categories=[],this.categoryKey=[{label:"其他",value:"other"}],c(this.query).then((function(t){var n=t.data,o=t.categoryKey;e.total=t.total,o.forEach((function(t){var n={label:t,value:t};e.categoryKey.push(n)})),Object.keys(n).forEach((function(t){for(var o=!0,a=0;a<n[t].length;a++)if(!1===n[t][a].status){o=!1;break}var l={name:t,selectAll:o,items:n[t]};e.categories.push(l)}))})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.query.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.query.pageNum=e,this.loadData()},showAdd:function(){this.dialogVisible=!0},showEdit:function(e){console.log(e),this.selectedCateInfo={selectedOption:e.categoryName,inputValue:e.name,itemId:e.id},this.dialogVisible=!0},closeModal:function(e){this.dialogVisible=!1,this.selectedCateInfo={},console.log(e),1===e&&this.loadData()}}},S=C,O=(n("6fc2"),Object(y["a"])(S,o,a,!1,null,"5a61fe7c",null));t["default"]=O.exports},"6fc2":function(e,t,n){"use strict";n("4c87")}}]);